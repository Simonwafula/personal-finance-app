import{r as a,j as e,h as O,L as i,k as T,l as _}from"./index-HX_wmsfL.js";import{fetchAccounts as D,updateAccount as R,createAccount as I,deleteAccount as K}from"./finance-CqPMwo_Z.js";const z=["BANK","MOBILE_MONEY","CASH","SACCO","INVESTMENT","LOAN","CREDIT_CARD","OTHER"];function B(s){const c=typeof s=="string"?Number(s):s;return Number.isNaN(c)?s.toString():c.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}function P(){const[s,c]=a.useState([]),[o,h]=a.useState(!1),[f,l]=a.useState(null),[n,y]=a.useState(null),[j,d]=a.useState(""),[N,u]=a.useState("BANK"),[v,x]=a.useState("KES"),[k,m]=a.useState("0"),[A,b]=a.useState(""),[w,S]=a.useState(!1);async function p(){try{h(!0),l(null);const t=await D();c(t)}catch(t){console.error(t),l("Failed to load accounts")}finally{h(!1)}}a.useEffect(()=>{p()},[]);function g(){d(""),u("BANK"),x("KES"),m("0"),b(""),y(null)}function C(t){y(t.id),d(t.name),u(t.account_type),x(t.currency),m(String(t.opening_balance)),b(t.institution||"")}async function M(t){t.preventDefault();try{S(!0),l(null);const r={name:j,account_type:N,currency:v,opening_balance:Number(k),institution:A};n?await R(n,r):await I(r),g(),await p()}catch(r){console.error(r),l(n?"Failed to update account":"Failed to create account")}finally{S(!1)}}async function E(t){if(confirm("Are you sure you want to delete this account?"))try{l(null),await K(t),await p()}catch(r){console.error(r),l("Failed to delete account")}}return e.jsxs("div",{className:"space-y-6 pb-20 animate-fade-in",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"ðŸ’¼ Accounts"}),e.jsx("p",{className:"text-base text-[var(--text-muted)] mt-2 font-medium",children:"Manage your bank accounts, mobile money, and financial institutions"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"inline-flex px-4 py-2 rounded-full bg-gradient-to-r from-blue-100 to-purple-100 dark:from-blue-900/30 dark:to-purple-900/30 text-sm font-semibold",children:[s.length," ",s.length===1?"Account":"Accounts"]})})]}),e.jsxs("div",{className:"grid lg:grid-cols-5 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("form",{onSubmit:M,className:"card animate-slide-in sticky top-6 bg-gradient-to-br from-blue-50/50 to-purple-50/50 dark:from-blue-900/10 dark:to-purple-900/10 border-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{className:"text-lg font-semibold flex items-center gap-2",children:n?"âœï¸ Edit Account":"âž• Add New Account"}),n&&e.jsx("button",{type:"button",onClick:g,className:"text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx(O,{size:20})})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Account Name *"}),e.jsx("input",{className:"w-full border border-gray-300 dark:border-gray-600 rounded-xl px-4 py-3.5 text-base bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all duration-200 placeholder:text-gray-400",value:j,onChange:t=>d(t.target.value),placeholder:"e.g., M-Pesa, KCB Savings",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Account Type *"}),e.jsx("select",{className:"w-full border border-gray-300 dark:border-gray-600 rounded-xl px-4 py-3.5 text-base bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all duration-200",value:N,onChange:t=>u(t.target.value),children:z.map(t=>e.jsx("option",{value:t,children:t.replace("_"," ")},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Currency"}),e.jsx("input",{className:"w-full border border-gray-300 dark:border-gray-600 rounded-xl px-4 py-3.5 text-base bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all duration-200 placeholder:text-gray-400",value:v,onChange:t=>x(t.target.value),placeholder:"KES"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Opening Balance"}),e.jsx("input",{type:"number",step:"0.01",className:"w-full border border-gray-300 dark:border-gray-600 rounded-xl px-4 py-3.5 text-base bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all duration-200 placeholder:text-gray-400",value:k,onChange:t=>m(t.target.value)})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Institution (Optional)"}),e.jsx("input",{className:"w-full border border-gray-300 dark:border-gray-600 rounded-xl px-4 py-3.5 text-base bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all duration-200 placeholder:text-gray-400",value:A,onChange:t=>b(t.target.value),placeholder:"e.g., KCB Bank, Safaricom"})]})]}),f&&e.jsx("div",{className:"mt-4 p-3 rounded-lg bg-red-50 border border-red-200 text-red-700 text-sm animate-slide-in",children:f}),e.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-[var(--border-subtle)]",children:[e.jsx("button",{type:"submit",disabled:w,className:"btn-primary flex-1 sm:flex-none disabled:opacity-60",children:w?"Savingâ€¦":n?"Update Account":"Create Account"}),n&&e.jsx("button",{type:"button",onClick:g,className:"btn-secondary",children:"Cancel"})]})]}),e.jsxs("div",{className:"card bg-gradient-to-br from-cyan-50/50 to-teal-50/50 dark:from-cyan-900/10 dark:to-teal-900/10 border border-cyan-200 dark:border-cyan-800",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("span",{className:"text-3xl",children:"ðŸ¦"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-1",children:"Account Management Tips"}),e.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Optimize your banking setup"})]})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs(i,{to:"/blog/separate-accounts",className:"flex gap-2 p-3 rounded-lg hover:bg-white/50 dark:hover:bg-gray-800/50 transition-all duration-200 group",children:[e.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold",children:"â€¢"}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Separate Accounts:"})," Keep different accounts for savings, spending, and bills to stay organized."]}),e.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400 opacity-0 group-hover:opacity-100 transition-opacity",children:"Read full guide â†’"})]})]}),e.jsxs(i,{to:"/blog/track-opening-balance",className:"flex gap-2 p-3 rounded-lg hover:bg-white/50 dark:hover:bg-gray-800/50 transition-all duration-200 group",children:[e.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:"â€¢"}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Track Opening Balance:"})," Record accurate starting balances for precise financial tracking."]}),e.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400 opacity-0 group-hover:opacity-100 transition-opacity",children:"Read full guide â†’"})]})]}),e.jsxs(i,{to:"/blog/monitor-accounts-regularly",className:"flex gap-2 p-3 rounded-lg hover:bg-white/50 dark:hover:bg-gray-800/50 transition-all duration-200 group",children:[e.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-bold",children:"â€¢"}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Monitor Regularly:"})," Check your accounts weekly to catch unauthorized transactions early."]}),e.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400 opacity-0 group-hover:opacity-100 transition-opacity",children:"Read full guide â†’"})]})]}),e.jsxs(i,{to:"/blog/mobile-money-security",className:"flex gap-2 p-3 rounded-lg hover:bg-white/50 dark:hover:bg-gray-800/50 transition-all duration-200 group",children:[e.jsx("span",{className:"text-orange-600 dark:text-orange-400 font-bold",children:"â€¢"}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Mobile Money Security:"})," Use strong PINs and enable transaction notifications for M-Pesa/Airtel Money."]}),e.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400 opacity-0 group-hover:opacity-100 transition-opacity",children:"Read full guide â†’"})]})]})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-[var(--border-subtle)]",children:e.jsx(i,{to:"/blog",className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"View All Financial Tips â†’"})})]})]}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"text-lg font-semibold mb-6 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ’¼"}),"Your Accounts",!o&&s.length>0&&e.jsxs("span",{className:"text-sm text-[var(--text-muted)] font-normal",children:["(",s.length,")"]})]}),o&&e.jsx("div",{className:"skeleton h-32 rounded"}),!o&&s.length===0&&e.jsxs("div",{className:"text-center py-16 text-[var(--text-muted)]",children:[e.jsx("div",{className:"text-5xl mb-4",children:"ðŸ¦"}),e.jsx("p",{className:"text-lg mb-2 font-medium",children:"No accounts yet"}),e.jsx("p",{className:"text-sm",children:"Create your first account above to get started"})]}),s.length>0&&e.jsx("div",{className:"block md:hidden space-y-3",children:s.map(t=>e.jsxs("div",{className:"p-4 bg-[var(--surface)] rounded-lg space-y-3 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-lg",children:t.name}),e.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:t.institution||"â€”"})]}),e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",children:t.account_type.replace("_"," ")})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("div",{className:"text-2xl font-bold",children:B(t.opening_balance)}),e.jsx("div",{className:"text-sm text-[var(--text-muted)]",children:t.currency})]}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t border-[var(--border-subtle)]",children:[e.jsxs("button",{onClick:()=>C(t),className:"btn-edit flex-1 inline-flex items-center justify-center gap-1",title:"Edit account",children:[e.jsx(T,{size:14}),"Edit"]}),e.jsxs("button",{onClick:()=>E(t.id),className:"btn-delete flex-1 inline-flex items-center justify-center gap-1",title:"Delete account",children:[e.jsx(_,{size:14}),"Delete"]})]})]},t.id))}),s.length>0&&e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-[var(--surface)] sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-right font-semibold",children:"Balance"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Currency"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Institution"}),e.jsx("th",{className:"px-4 py-3 text-right font-semibold",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-[var(--border-subtle)]",children:s.map(t=>e.jsxs("tr",{className:"hover:bg-[var(--surface)] transition-colors",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:t.name}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",children:t.account_type.replace("_"," ")})}),e.jsx("td",{className:"px-4 py-3 text-right font-semibold",children:B(t.opening_balance)}),e.jsx("td",{className:"px-4 py-3",children:t.currency}),e.jsx("td",{className:"px-4 py-3",children:t.institution||"â€”"}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsxs("button",{onClick:()=>C(t),className:"btn-edit inline-flex items-center gap-1",title:"Edit account",children:[e.jsx(T,{size:14}),"Edit"]}),e.jsxs("button",{onClick:()=>E(t.id),className:"btn-delete inline-flex items-center gap-1",title:"Delete account",children:[e.jsx(_,{size:14}),"Delete"]})]})})]},t.id))})]})})]})})]})]})}export{P as default};
