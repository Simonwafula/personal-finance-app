import{r as t,j as e,L as S,A as C,B as R,C as A}from"./index-HX_wmsfL.js";function L(){const[a,b]=t.useState(null),[r,g]=t.useState(20),[l,i]=t.useState(0),[o,h]=t.useState(""),[c,p]=t.useState(""),[u,f]=t.useState(""),[x,v]=t.useState(!1),[d,m]=t.useState(!1);async function n(){m(!0);try{const s=await C({limit:r,offset:l,q:o||void 0,level:c||void 0,category:u||void 0,unread:x||void 0});b(s)}finally{m(!1)}}t.useEffect(()=>{n()},[r,l]);function j(s){s.preventDefault(),i(0),n()}const y=l>0,N=!!a&&l+r<a.count;async function k(s){await R(s),n()}async function w(){await A(),n()}return e.jsxs("div",{className:"space-y-6 pb-20 max-w-7xl mx-auto animate-fade-in",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"ðŸ”” Notifications"}),e.jsx("p",{className:"text-base text-[var(--text-muted)] mt-2 font-medium",children:"Stay updated with important alerts and reminders"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:r,onChange:s=>g(Number(s.target.value)),className:"border border-gray-300 dark:border-gray-600 rounded-xl px-4 py-3 text-base bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all duration-200",children:[e.jsx("option",{value:10,children:"10 per page"}),e.jsx("option",{value:20,children:"20 per page"}),e.jsx("option",{value:50,children:"50 per page"})]}),e.jsx("button",{className:"btn-primary",onClick:w,children:"âœ“ Mark All Read"})]})]}),e.jsx("div",{className:"card p-6",children:e.jsxs("form",{onSubmit:j,className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Search"}),e.jsx("input",{className:"w-full border border-gray-300 dark:border-gray-600 rounded-xl px-4 py-3.5 text-base bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all duration-200 placeholder:text-gray-400",value:o,onChange:s=>h(s.target.value),placeholder:"Title or message"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Level"}),e.jsxs("select",{className:"w-full border border-gray-300 dark:border-gray-600 rounded-xl px-4 py-3.5 text-base bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all duration-200",value:c,onChange:s=>p(s.target.value),children:[e.jsx("option",{value:"",children:"All Levels"}),e.jsx("option",{value:"INFO",children:"â„¹ï¸ Info"}),e.jsx("option",{value:"SUCCESS",children:"âœ… Success"}),e.jsx("option",{value:"WARNING",children:"âš ï¸ Warning"}),e.jsx("option",{value:"ERROR",children:"âŒ Error"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Category"}),e.jsx("input",{className:"w-full border border-gray-300 dark:border-gray-600 rounded-xl px-4 py-3.5 text-base bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all duration-200 placeholder:text-gray-400",value:u,onChange:s=>f(s.target.value),placeholder:"e.g. budget, recurring"})]}),e.jsxs("div",{className:"flex items-center gap-2 pb-2",children:[e.jsx("input",{id:"unreadOnly",type:"checkbox",className:"w-5 h-5 rounded border-gray-300 dark:border-gray-600 text-blue-500 focus:ring-2 focus:ring-blue-500/50 transition-all duration-200",checked:x,onChange:s=>v(s.target.checked)}),e.jsx("label",{htmlFor:"unreadOnly",className:"text-sm font-medium cursor-pointer",children:"Unread only"})]}),e.jsx("div",{children:e.jsx("button",{className:"btn-primary w-full",type:"submit",children:"ðŸ” Apply Filters"})})]})}),e.jsxs("div",{className:"card animate-slide-in",children:[d&&e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"loading-spinner mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Loading notifications..."})]}),!d&&a&&a.results.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ””"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"No notifications found"}),e.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"You're all caught up!"})]}),!d&&a&&a.results.length>0&&e.jsx("div",{className:"divide-y divide-[var(--border-subtle)]",children:a.results.map(s=>e.jsx("div",{className:`px-6 py-4 transition-all hover:bg-[var(--surface-hover)] ${s.is_read?"":"bg-blue-50 dark:bg-blue-900/10 border-l-4 border-l-blue-500"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`mt-1 w-3 h-3 rounded-full flex-shrink-0 ${s.level==="ERROR"?"bg-red-500 shadow-lg shadow-red-500/50":s.level==="WARNING"?"bg-yellow-500 shadow-lg shadow-yellow-500/50":s.level==="SUCCESS"?"bg-green-500 shadow-lg shadow-green-500/50":"bg-blue-500 shadow-lg shadow-blue-500/50"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start gap-2 mb-1",children:[e.jsx("span",{className:"font-semibold text-base flex-1",children:s.title}),!s.is_read&&e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-500 text-white",children:"NEW"})]}),s.message&&e.jsx("p",{className:"text-sm text-[var(--text-muted)] whitespace-pre-line mb-2",children:s.message}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-[var(--text-muted)]",children:[e.jsxs("span",{children:["ðŸ“… ",new Date(s.created_at).toLocaleString()]}),s.category&&e.jsxs("span",{children:["ðŸ·ï¸ ",s.category]})]}),s.link_url&&e.jsx(S,{to:s.link_url,className:"inline-flex items-center gap-1 text-sm text-blue-600 dark:text-blue-400 hover:underline mt-2",children:"ðŸ”— View Details â†’"})]}),!s.is_read&&e.jsx("button",{className:"btn-secondary text-xs px-3 py-1.5 flex-shrink-0",onClick:()=>k(s.id),children:"âœ“ Mark Read"})]})},s.id))}),e.jsxs("div",{className:"px-6 py-4 bg-[var(--surface)] border-t border-[var(--border-subtle)] flex items-center justify-between",children:[e.jsx("button",{className:"btn-secondary disabled:opacity-40",disabled:!y,onClick:()=>i(Math.max(0,l-r)),children:"â† Previous"}),e.jsx("div",{className:"text-sm font-medium",children:a?e.jsxs("span",{children:["Showing ",e.jsxs("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:[Math.min(a.count,l+1),"-",Math.min(a.count,l+(a.results?.length||0))]})," of ",e.jsx("span",{className:"font-bold",children:a.count})]}):"0 of 0"}),e.jsx("button",{className:"btn-secondary disabled:opacity-40",disabled:!N,onClick:()=>i(l+r),children:"Next â†’"})]})]})]})}export{L as default};
